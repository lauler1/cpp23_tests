<!DOCTYPE HTML>

<html>
    <head>
        
        <script type = "text/javascript">
			var ws;
            function WebSocketTest() {
                    
				// Let us open a web socket
				ws = new WebSocket("ws://localhost:8001/chat");
			
				ws.onopen = function() {
					console.log("onopen.");
					
					// Web Socket is connected, send data using send()
					ws.send("Message to send");
					//alert("Message is sent...");
				};
			
				ws.onmessage = function (evt) { 
					var leng;
					if (event.data.size === undefined) {
						leng = event.data.length
					} else {
						leng = event.data.size
					}
					console.log("onmessage. size: " + leng + ", content: " + event.data);

				};
			
				ws.onclose = function() { 
					
					// websocket is closed.
					console.log("onclose.");
				};

            }
            function WebSocketSend() {
				ws.send("Message to send");
			}
			function WebSocketClose() {
				ws.close();
			}
        </script>
		
    </head>
    
    <body>
        <div id = "sse1">
            <a href = "javascript:WebSocketTest()">Run WebSocket</a>
        </div>
        
        <div id = "sse2">
            <a href = "javascript:WebSocketSend()">Send Message with WebSocket</a>
        </div>
        <div id = "sse3">
            <a href = "javascript:WebSocketClose()">Close WebSocket</a>
        </div>
    </body>
</html>
